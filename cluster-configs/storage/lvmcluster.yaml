---
apiVersion: lvm.topolvm.io/v1alpha1
kind: LVMCluster
metadata:
  name: lvmcluster
  namespace: openshift-storage
spec:
  storage:
    deviceClasses:
    - name: lvmstorage
      # This matches the partition label created during installation
      deviceSelector:
        paths:
        - /dev/disk/by-partlabel/lvmstorage
      thinPoolConfig:
        name: thin-pool
        sizePercent: 90
        overprovisionRatio: 10
      # Optional: specify node selector if you want to limit to specific nodes
      # nodeSelector:
      #   kubernetes.io/hostname: "node-name"
---
# Optional: Create a default storage class
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: lvms-lvmstorage
  annotations:
    # Uncomment to make this the default storage class
    storageclass.kubernetes.io/is-default-class: "true"
parameters:
  csi.storage.k8s.io/fstype: xfs
  topolvm.io/device-class: lvmstorage
provisioner: topolvm.io
reclaimPolicy: Delete
volumeBindingMode: WaitForFirstConsumer
allowVolumeExpansion: true
